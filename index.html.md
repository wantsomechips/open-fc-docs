# OpenAI Function Calling


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Project Overview

This project aims to demonstrate how to use OpenAI Function Calling by
implementing:

- A minimal
  [`add`](https://wantsomechips.github.io/openai-fc/core.html#add)
  function as a tool for arithmetic.
- Asynchronous chat interface with OpenAI via `AsyncOpenAI`.
- Discord bot integration using `discord.py`.

**See detailed explanation in `nbs/*.ipynb`**.

Since this is a **private** repo and Github Pages isn’t allowed in a
private repo, we push the `gh-pages` branch to a public repo and set up
Github Pages there. Here is the
[link](https://wantsomechips.github.io/open-fc-docs/).

## Set Up Environment

Clone the repo and set up the environment. Change `<your-venv-name>` to
the venv name you want, and run:

``` python
git clone https://github.com/wantsomechips/openai-fc.git
cd openai-fc
python -m venv <your-venv-name>
source ./<your-venv-name>/bin/activate
pip install -e ".[dev]"
```

Create a `.env` file in the project root with the following variables:

``` bash
OPENAI_API_KEY=

OPENAI_MODEL=gpt-4o

DISCORD_TOKEN=
```

## Notebooks Overviw

- `nbs/00_core.ipynb`: Core arithmetic tool and logger definition.

- `nbs/01_openai.ipynb`: OpenAI tools, function calling logic, async
  chat bot.

- `nbs/02_discord.ipynb`: Discord bot setup, command handlers.

- `nbs/index.ipynb`: Documentation.

Tests are included within the notebooks’ cells using `#| hide`.

## Module Structure

- `openai_fc.core`
  - `add`: Core function used for OpenAI Function Calling.
  - `logger`: Custom logger.
- `openai_fc.openai_fc`
  - `INS_ADD`, `TOOLS`, `FUNCS`: Instruction, tool schemas and
    registered functions dictionary.
  - `get_async_openai_client()`: Initialize async OpenAI client.
  - `async_chat_bot(query: str)`: Async chatbot using function calling.
- `openai_fc.discord_bot`
  - `get_discord_bot()`: Initialize Discord Bot using async OpenAI
    client.
  - Slash and prefix command in Discord Server, `/cal` or `!cal`, will
    call `add()` through OpenAI API.

## License

This project is licensed under the **Apache 2.0 License**. See
[LICENSE](./LICENSE) for details.

## Author

**wantSomeChips**

[GitHub Profile](https://github.com/wantsomechips)
